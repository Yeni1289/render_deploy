<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visualización del Notebook 07_Divicion_del_DataSet</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .active-btn { background-color: #2563eb; color: white; }
        .hidden { display: none; }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 flex flex-col items-center p-6">
    <h1 class="text-3xl font-bold text-center mb-4 text-blue-700"> Segundo Parcial</h1>

    <div class="w-full max-w-4xl mb-6">
        <div class="bg-white rounded-2xl shadow-lg p-6">
            <h2 class="text-xl font-semibold text-indigo-700 mb-3">Descripción</h2>
            <p class="text-gray-700 mb-3">Se debe de separar el DataSet en los diferentes subconjuntos necesarios para realizar los procesos de entrenamiento, validación y pruebas. Sklearn implementa la función <strong>train_test_split</strong>.</p>

            <p class="text-gray-700 mb-3">Separa el DataSet de pruebas 50% validación, 50% test con:</p>
            <pre class="bg-gray-100 p-3 rounded mb-3 text-sm overflow-auto">val_set, test_set = train_test_split(test_set, test_size=0.5, random_state=42)</pre>

            <h3 class="text-lg font-medium text-gray-800 mt-4 mb-2">3.- Particionado aleatorio y stratified sampling</h3>
            <p class="text-gray-700 mb-2">Sklearn implementa la función <strong>train_test_split</strong>, sin embargo por defecto realiza un particionado aleatorio. Incluso con una semilla fija, cada vez que se cargue el Dataset se generan nuevos subconjuntos, lo que puede provocar que, tras muchos intentos, el algoritmo llegue a ver prácticamente todo el Dataset.</p>

            <p class="text-gray-700 mb-2">Para solucionar este problema, sklearn introdujo el parámetro <strong>shuffle</strong>. Si el conjunto es pequeño, existe el riesgo de introducir <em>sampling bias</em>. Para evitarlo, se recomienda <strong>Stratified Sampling</strong>, que garantiza la representación de las características importantes en cada subconjunto mediante el parámetro <strong>stratify</strong> en <strong>train_test_split</strong>.</p>

            <div class="grid grid-cols-3 gap-4 mt-4">
                <div class="p-3 bg-indigo-50 rounded text-center">
                    <div class="text-sm text-gray-500">Longitud del Dataset</div>
                    <div class="text-xl font-semibold text-indigo-700">125,973</div>
                </div>
                <div class="p-3 bg-indigo-50 rounded text-center">
                    <div class="text-sm text-gray-500">Training Set</div>
                    <div class="text-xl font-semibold text-indigo-700">75,583</div>
                </div>
                <div class="p-3 bg-indigo-50 rounded text-center">
                    <div class="text-sm text-gray-500">Validation / Test (cada uno)</div>
                    <div class="text-xl font-semibold text-indigo-700">25,195</div>
                </div>
            </div>

            <p class="text-gray-600 text-sm mt-4">Comparación: stratified sampling mantiene la proporción de la característica objetivo en cada subset frente al muestreo aleatorio que puede no hacerlo. A continuación se muestran las gráficas comparativas.</p>
        </div>
    </div>

    <!-- Sección de gráficas -->
    <div class="w-full max-w-5xl">
        {% if graficas %}
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            {% for grafica in graficas %}
                <div class="bg-white p-4 rounded-2xl shadow-md">
                    <h3 class="text-lg font-semibold text-center text-blue-600 mb-2">{{ grafica.titulo }}</h3>
                    {% if grafica.descripcion %}
                        <p class="text-sm text-gray-600 mb-3 whitespace-pre-line">{{ grafica.descripcion }}</p>
                    {% endif %}
                    <img src="data:image/png;base64,{{ grafica.imagen }}" alt="{{ grafica.titulo }}" class="mx-auto rounded-lg shadow" />
                </div>
            {% endfor %}
            </div>
        {% else %}
            <p class="text-center text-gray-500">No se encontraron gráficas en el notebook.</p>
        {% endif %}
    </div>
</body>
</html>
